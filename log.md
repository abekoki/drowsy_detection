# プロジェクト作業ログ

## ===2025-08-05===

### 連続閉眼検知アルゴリズム仕様書作成
- **作業内容**: テンプレートとアルゴリズム概要を統合し、具体的な仕様書 `AS_drowsy_detection.md` を作成
- **対象ファイル**:
  - `algorithm_specification/アルゴリズム仕様書について.md`
  - `algorithm_specification/連続閉眼検知アルゴリズム.md`
  - `algorithm_specification/AS_drowsy_detection.md`
- **主なポイント**:
  - 11 セクション構成を維持しつつ、連続閉眼検知アルゴリズム固有の詳細を記載
  - 入力・出力仕様、パラメータ表、処理フロー (Mermaid) を追加
  - 性能・制約、セキュリティ、法的対応等の項目を具体化
  - 3.2 処理フローの Mermaid 図と擬似コードの HTML エンティティを修正

### 仕様書整合性修正
- **作業内容**: ユーザーによる大幅な書き直し後の整合性修正
- **対象ファイル**: `algorithm_specification/AS_drowsy_detection.md`
- **修正内容**:
  - 入力仕様: `timestamp` → `frame_num` (int型) に統一
  - 出力仕様: 擬似コードと使用例を `int` 型 (0/1/-1) に統一
  - セクション番号: 削除されたセクションに合わせて4,5に修正
  - 変更履歴: v1.0.1として修正内容を追記


## ===2025-08-06===

### アルゴリズムロジック変更
- **作業内容**: 左右それぞれの目で独立した閉眼判定に変更、両目閉眼状態の継続時間で判定するロジックに修正
- **対象ファイル**: 
  - `algorithm_specification/AS_drowsy_detection.md`
  - `README.md`
- **修正内容**:
  - パラメータ: `eye_close_threshold` → `left_eye_close_threshold`, `right_eye_close_threshold` に分離
  - アルゴリズム概要: 左右それぞれの目で独立した閉眼判定、両目閉眼状態の継続時間で判定
  - 処理フロー: Mermaid図を左右の目の判定フローに変更
  - 擬似コード: 左右それぞれの目の閉眼判定ロジックに変更
  - 核心アルゴリズム: 両方の目が閉眼状態の場合のみタイマー加算
  - README: パラメータを左右分離して記載
  - 変更履歴: v1.0.2として修正内容を追記

### 処理フロー修正
- **作業内容**: タイマーが閾値を超えている間は連続閉眼フラグをONに保持するロジックに変更
- **対象ファイル**: `algorithm_specification/AS_drowsy_detection.md`
- **修正内容**:
  - 処理フロー: Mermaid図を修正し、タイマーが閾値を超えている間は連続閉眼フラグをONに保持
  - 擬似コード: 両目が閉眼状態でない場合でも、タイマーが閾値を超えている間は連続閉眼状態を返すロジックに変更
  - バージョン: v1.0.3に更新
  - 変更履歴: v1.0.3として修正内容を追記

### README.md作成
- **作業内容**: プロジェクト概要を記載したREADME.mdを作成
- **対象ファイル**: `README.md`
- **作成内容**:
  - プロジェクト概要と主な特徴
  - 技術仕様の概要（入力・出力・パラメータ）
  - 詳細仕様書へのリンク
  - 開発環境とプロジェクト構成
  - ライセンス・貢献セクション（プレースホルダー）

### アルゴリズム仕様書の構成要素整理
- **作業内容**: アルゴリズム仕様書を書く際に必要な構成要素を列挙・整理
- **対象ファイル**: `algorithm_specification/アルゴリズム仕様書について.md`
- **作業詳細**:
  - 空のファイルに包括的な構成要素を追加
  - 11の主要セクションに分類して整理
  - 各セクションの詳細項目を明記
- **構成要素**:
  1. 概要・目的（アルゴリズム名、目的・背景、適用範囲）
  2. 技術仕様（入力仕様、出力仕様、パラメータ）
  3. アルゴリズム詳細（処理フロー、核心アルゴリズム、エラーハンドリング）
  4. 性能・制約（計算量、精度・性能指標、制約事項）
  5. 実装仕様（開発環境、ファイル構成、テスト仕様）
  6. 使用例・サンプル（基本使用例、応用例、トラブルシューティング）
  7. 保守・運用（メンテナンス、監視・ログ、バックアップ・復旧）
  8. セキュリティ・プライバシー（セキュリティ要件、プライバシー保護）
  9. 法的・規制対応（準拠すべき規制、コンプライアンス）
  10. 参考資料（参考文献、関連文書）
  11. 変更履歴（バージョン履歴、レビュー履歴）
- **注意事項**: 第三者が理解できるよう専門用語の説明、図表・サンプルコードの活用、定期レビュー・更新、バージョン管理の徹底を明記 